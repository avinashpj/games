import{M as i,N as c,R as x,W as v,X as d}from"./chunk-P7QR4T6U.js";var f={};function B(a,e){let t=2166136261;for(let o=0;o<e;o++)t^=a[o].uid,t=Math.imul(t,16777619),t>>>=0;return f[t]||h(a,e,t)}var u=0;function h(a,e,t){let o={},n=0;u||(u=d());for(let s=0;s<u;s++){let p=s<e?a[s]:x.EMPTY.source;o[n++]=p.source,o[n++]=p.style}let r=new v(o);return f[t]=r,r}var l=class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let o=i.get().createCanvas();o.width=e,o.height=t;let n=o.getContext("2d");return{canvas:o,context:n}}getOptimalCanvasAndContext(e,t,o=1){e=Math.ceil(e*o-1e-6),t=Math.ceil(t*o-1e-6),e=c(e),t=c(t);let n=(e<<17)+(t<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let r=this._canvasPool[n].pop();return r||(r=this._createCanvasAndContext(e,t)),r}returnCanvasAndContext(e){let t=e.canvas,{width:o,height:n}=t,r=(o<<17)+(n<<1);this._canvasPool[r].push(e)}clear(){this._canvasPool={}}},b=new l;export{B as a,b};
